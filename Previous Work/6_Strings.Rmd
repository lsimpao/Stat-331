---
title: "In-Class Activity:  Working with strings"
author: "Luisa Simpao"
date: "31 January 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Setup


```{r}

library(tidyverse)
library(lubridate)
library(stringr)

message <- read.csv("https://www.dropbox.com/s/lgpn3vmksk3ssdo/scrambled_message.txt?dl=1", stringsAsFactors = FALSE)$Word
```


## Warm-up exercises

1. How many characters are in the scrambled message?
2. How many of these characters are white space?
3. How many words are in the scrambled message?
4. Show all the punctuation marks in the scrambled message.
5. Print out, in all capitals, the longest word in the scrambled message.
6. Print out every word that starts with the letter "m" and ends with the letter "z" in the scrambled message.

```{R}

# 1 There are a total of 2,544 characters in the message.
message %>%
  str_length() %>% 
  sum

# 2 1,652 characters in the message are white space.
message %>%
  str_count(pattern = "[:space:]") %>% 
  sum

#3 There are 824 words in the message. // There are 127 elements in the data set.
message %>% 
  str_count(pattern = "[:alpha:]") %>%
  sum

message %>% length()

#4
message %>% 
  str_extract_all(pattern ="[:punct:]") %>%
  unlist()

#5
idx <- message %>% 
  str_count(pattern = "[:alpha:]") %>%
  which.max()
big_word <- message[idx]
str_to_upper(big_word)

# 6
message %>% 
  str_extract_all(pattern = "m.*z") %>%
  # str_extract_all(pattern = "m[^:blank:]*z") %>%
  # str_extract_all(pattern = "m[:alpha:]*z") %>%
  unlist()

```

## Decode a message

Now complete the following steps to decode the message:

1. Remove any spaces before or after each word.
```{R}
# 1
messagenws <- message %>% 
  trimws()

# 2
message16 <- messagenws %>% 
  str_sub(1, 16)

#3
message_ugh <- message16 %>%
  str_replace_all(pattern = "ug[:alpha:]*h[:punct:]", replacement = "")

# 4
message_ee <- message_ugh %>%
  str_replace_all(pattern = fixed("aa"), replacement = "ee")

# 5
message_t <- message_ee %>%
  str_replace_all(pattern = fixed("z"), replacement = "t")

# 6
message_y <- message_t %>%
  str_replace(pattern = "b$", replacement = "y")

message_v <- message_y %>%
  str_replace(pattern = "^k|K", replacement = "v")

str_c(message_v)

```
2. No word should be longer than 16 characters. Drop all extra characters off the end of each word.
3. Any time you see the word "ugh", with any number of h's, followed by a punctuation mark, delete this.
4. Replace all instances of exactly 2 a's with exactly 2 e's.
5. Replace all z's with t's.
6. Every word that ends in b, change that to a y.  *Hint: punctuation!*
7. Every word that starts with k, change that to a v.  *Hint: capitalization!*
8. Use `str_c` to recombine all your words into a message.
9. Find the movie this quote is from, and enter that on PolyLearn.
